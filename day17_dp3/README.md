# 96. ä¸åŒçš„äºŒå‰æœç´¢æ ‘ (Unique Binary Search Trees)

**éš¾åº¦**: Medium
**æ ‡ç­¾**: #åŠ¨æ€è§„åˆ’ #æ•°å­¦ #æ ‘ #äºŒå‰æœç´¢æ ‘

## ğŸ’¡ æ ¸å¿ƒè§£é¢˜æ€è·¯

è¿™é“é¢˜è¡¨é¢ä¸Šæ˜¯åœ¨é—®â€œæ ‘çš„å½¢æ€â€ï¼Œå®é™…ä¸Šæ˜¯åœ¨è€ƒ **æ’åˆ—ç»„åˆ**ã€‚

### 1. å…³é”®çªç ´å£ï¼šæ ¹èŠ‚ç‚¹çš„é€‰æ‹©
æ„å»ºä¸€æ£µäºŒå‰æœç´¢æ ‘ (BST) çš„å…³é”®åœ¨äº **è°åšæ ¹èŠ‚ç‚¹**ã€‚
å‡è®¾æœ‰ `n` ä¸ªèŠ‚ç‚¹ï¼ˆ1 åˆ° nï¼‰ï¼Œæˆ‘ä»¬éå†æ¯ä¸€ä¸ªæ•°å­— `j` ä½œä¸ºæ ¹èŠ‚ç‚¹ï¼š
*   **å·¦å­æ ‘**ï¼šä¸€å®šç”± `1` åˆ° `j-1` è¿™ `j-1` ä¸ªæ¯”æ ¹å°çš„æ•°ç»„æˆã€‚
*   **å³å­æ ‘**ï¼šä¸€å®šç”± `j+1` åˆ° `n` è¿™ `n-j` ä¸ªæ¯”æ ¹å¤§çš„æ•°ç»„æˆã€‚

### 2. ç»“æ„æ•°é‡ä¸æ•°å€¼æ— å…³
BST çš„å½¢æ€æ•°é‡ **åªä¸èŠ‚ç‚¹çš„ä¸ªæ•°æœ‰å…³**ï¼Œä¸å…·ä½“èŠ‚ç‚¹çš„å€¼æ— å…³ã€‚
*   ä¾‹å¦‚ï¼šç”¨ `{1, 2}` ç»„æˆçš„ BST æ•°é‡ï¼Œç­‰äºç”¨ `{99, 100}` ç»„æˆçš„ BST æ•°é‡ã€‚
*   å› æ­¤ï¼Œå³å­æ ‘è™½ç„¶æ•°å€¼å¤§ï¼Œä½†å®ƒæœ‰ `n-j` ä¸ªèŠ‚ç‚¹ï¼Œå…¶ç»“æ„ç§ç±»æ•°å°±ç­‰äº `dp[n-j]`ã€‚

### 3. ä¹˜æ³•åŸç†ï¼ˆç¬›å¡å°”ç§¯ï¼‰
å›ºå®šæ ¹èŠ‚ç‚¹ä¸º `j` æ—¶ï¼š
$$ \text{æ€»æ–¹æ¡ˆæ•°} = (\text{å·¦å­æ ‘æ–¹æ¡ˆæ•°}) \times (\text{å³å­æ ‘æ–¹æ¡ˆæ•°}) $$

---

## ğŸ”¢ åŠ¨æ€è§„åˆ’äº”éƒ¨æ›²

1.  **å®šä¹‰çŠ¶æ€**ï¼š
    `dp[i]`ï¼šç”± `i` ä¸ªèŠ‚ç‚¹ç»„æˆçš„ä¸åŒäºŒå‰æœç´¢æ ‘çš„æ€»æ•°é‡ã€‚

2.  **é€’æ¨å…¬å¼**ï¼š
    $$ dp[i] = \sum_{j=1}^{i} (dp[j-1] \times dp[i-j]) $$
    *   $j$ï¼šä»£è¡¨å½“å‰é€‰å®šçš„æ ¹èŠ‚ç‚¹ï¼ˆä» 1 éå†åˆ° $i$ï¼‰ã€‚
    *   $dp[j-1]$ï¼šå·¦å­æ ‘ ($j-1$ ä¸ªèŠ‚ç‚¹) çš„æ–¹æ¡ˆæ•°ã€‚
    *   $dp[i-j]$ï¼šå³å­æ ‘ ($i-j$ ä¸ªèŠ‚ç‚¹) çš„æ–¹æ¡ˆæ•°ã€‚

3.  **åˆå§‹åŒ–**ï¼š
    *   `dp[0] = 1`ï¼š**ç©ºæ ‘**ä¹Ÿç®—ä¸€ç§å½¢æ€ï¼ˆä¸ºäº†ä¹˜æ³•è®¡ç®—æ—¶ä¸è®©ç»“æœå˜ 0ï¼Œå¿…é¡»è®¾ä¸º 1ï¼‰ã€‚
    *   `dp[1] = 1`ï¼šä¸€ä¸ªèŠ‚ç‚¹åªæœ‰ä¸€ç§å½¢æ€ã€‚

4.  **éå†é¡ºåº**ï¼š
    *   èŠ‚ç‚¹æ•° `i` ä» 2 éå†åˆ° `n`ã€‚
    *   å†…éƒ¨æ ¹èŠ‚ç‚¹ `j` ä» 1 éå†åˆ° `i`ã€‚

---

## ğŸ’» å…³é”®ä»£ç éª¨æ¶

```python
class Solution:
    def numTrees(self, n: int) -> int:
        dp = [0] * (n + 1)
        dp[0], dp[1] = 1, 1
        
        # å¤–å±‚ï¼šè®¡ç®— dp[i] (èŠ‚ç‚¹æ€»æ•°)
        for i in range(2, n + 1):
            # å†…å±‚ï¼šå°è¯•æ¯ä¸ªæ•°å­— j ä½œä¸ºæ ¹èŠ‚ç‚¹
            for j in range(1, i + 1):
                left_subtrees = dp[j - 1]
                right_subtrees = dp[i - j]
                # ç´¯åŠ ä¸åŒæ ¹èŠ‚ç‚¹çš„æƒ…å†µ
                dp[i] += left_subtrees * right_subtrees
                
        return dp[n]
```

---

## ğŸ“Š å¤æ‚åº¦åˆ†æ

*   **æ—¶é—´å¤æ‚åº¦**: $O(N^2)$ã€‚
    *   æˆ‘ä»¬éœ€è¦è®¡ç®— `dp[2]` åˆ° `dp[n]`ã€‚è®¡ç®— `dp[i]` éœ€è¦éå† `i` æ¬¡ã€‚
    *   æ€»æ¬¡æ•°çº¦ä¸º $1 + 2 + \dots + n = \frac{n(n+1)}{2}$ã€‚
*   **ç©ºé—´å¤æ‚åº¦**: $O(N)$ã€‚
    *   éœ€è¦ä¸€ä¸ªé•¿åº¦ä¸º $N+1$ çš„æ•°ç»„ã€‚

---

## ğŸ“ æ•°å­¦å½©è›‹ï¼šå¡ç‰¹å…°æ•°

è¿™é“é¢˜çš„ç­”æ¡ˆåºåˆ— `1, 1, 2, 5, 14, 42...` æ­£æ˜¯è‘—åçš„ **å¡ç‰¹å…°æ•° (Catalan Number)**ã€‚

å¦‚æœä½ ä¸æƒ³å†™ DPï¼Œä¹Ÿå¯ä»¥ç›´æ¥ç”¨é€šé¡¹å…¬å¼æ±‚è§£ï¼ˆé¢è¯•ä¸­ä½œä¸ºåŠ åˆ†é¡¹ï¼‰ï¼š

$$ C_n = \frac{1}{n+1} \binom{2n}{n} = \frac{(2n)!}{(n+1)!n!} $$

```python
# æ•°å­¦è§£æ³• ($O(N)$ æˆ– $O(1)$)
import math
return math.comb(2 * n, n) // (n + 1)
```

---

# 416. åˆ†å‰²ç­‰å’Œå­é›† (Partition Equal Subset Sum)

**éš¾åº¦**: Medium
**æ ‡ç­¾**: #åŠ¨æ€è§„åˆ’ #0-1èƒŒåŒ… #æ•°å­¦

## ğŸ’¡ æ ¸å¿ƒæ€ç»´ï¼šè½¬åŒ–é—®é¢˜
è¿™é“é¢˜è¡¨é¢ä¸Šæ˜¯â€œé›†åˆåˆ†å‰²â€ï¼Œå®é™…ä¸Šæ˜¯ **0-1 èƒŒåŒ…é—®é¢˜** çš„æ ‡å‡†å˜ä½“ã€‚
*   **é—®é¢˜è½¬åŒ–**ï¼šèƒ½ä¸èƒ½ä»æ•°ç»„ä¸­æŒ‘é€‰å‡ºä¸€äº›æ•°å­—ï¼Œä½¿å¾—å®ƒä»¬çš„ **å’Œ** æ°å¥½ç­‰äº **æ€»å’Œçš„ä¸€åŠ**ï¼Ÿ
*   **èƒŒåŒ…æ˜ å°„**ï¼š
    *   **èƒŒåŒ…å®¹é‡ (Target)**ï¼š`sum(nums) / 2`ã€‚
    *   **ç‰©å“é‡é‡ (Weight)**ï¼šå…ƒç´ çš„æ•°å€¼ `nums[i]`ã€‚
    *   **ç‰©å“ä»·å€¼ (Value)**ï¼šå…ƒç´ çš„æ•°å€¼ `nums[i]`ï¼ˆè¿™é‡Œé‡é‡å³ä»·å€¼ï¼‰ã€‚
    *   **ç›®æ ‡**ï¼šèƒŒåŒ…èƒ½å¦è¢«â€œè£…æ»¡â€ï¼Ÿï¼ˆå³ `dp[target] == target`ï¼‰ã€‚

## ğŸ”¢ ç®—æ³•æ­¥éª¤ (DP äº”éƒ¨æ›²)

1.  **ç‰¹åˆ¤**ï¼šå¦‚æœ `sum(nums)` æ˜¯å¥‡æ•°ï¼Œæ— æ³•å¹³åˆ†ï¼Œç›´æ¥è¿”å› `False`ã€‚
2.  **å®šä¹‰çŠ¶æ€**ï¼š
    *   `dp[j]` è¡¨ç¤ºå®¹é‡ä¸º `j` çš„èƒŒåŒ…ï¼Œæ‰€èƒ½èƒŒçš„æœ€å¤§å…ƒç´ å’Œã€‚
    *   å¤§å°ä¸º `target + 1`ï¼Œåˆå§‹åŒ–ä¸º 0ã€‚
3.  **é€’æ¨å…¬å¼**ï¼š
    $$ dp[j] = \max(dp[j], \quad dp[j - \text{num}] + \text{num}) $$
    *   `dp[j]`ï¼šä¸æ”¾å½“å‰æ•°å­—ã€‚
    *   `dp[j-num] + num`ï¼šæ”¾å…¥å½“å‰æ•°å­—ã€‚
4.  **éå†é¡ºåº (æ ¸å¿ƒ)**ï¼š
    *   **å¤–å±‚**éå†ç‰©å“ (`num`)ã€‚
    *   **å†…å±‚**éå†èƒŒåŒ…å®¹é‡ (`j`)ã€‚
    *   **æ³¨æ„**ï¼šå†…å±‚å¿…é¡» **ä»å¤§åˆ°å° (å€’åº)** éå†ï¼è¿™æ˜¯ä¸ºäº†ä¿è¯æ¯ä¸ªç‰©å“åªè¢«ä½¿ç”¨ä¸€æ¬¡ï¼ˆ0-1 èƒŒåŒ…ç‰¹æ€§ï¼‰ã€‚
5.  **è¿”å›ç»“æœ**ï¼šåˆ¤æ–­ `dp[target]` æ˜¯å¦ç­‰äº `target`ã€‚

## ğŸ’» å…³é”®ä»£ç æ¨¡æ¿

```python
class Solution:
    def canPartition(self, nums: List[int]) -> bool:
        total_sum = sum(nums)
        # å¥‡æ•°ä¸å¯èƒ½å¹³åˆ†
        if total_sum % 2 != 0:
            return False
        
        target = total_sum // 2
        dp = [0] * (target + 1)
        
        # å¤–å±‚éå†ç‰©å“
        for num in nums:
            # å†…å±‚å€’åºéå†èƒŒåŒ…
            # èŒƒå›´ï¼šä» target åˆ° num (å¦‚æœ j < numï¼ŒèƒŒåŒ…è£…ä¸ä¸‹ï¼Œä¸ç”¨æ›´æ–°)
            for j in range(target, num - 1, -1):
                dp[j] = max(dp[j], dp[j - num] + num)
            
            # å‰ªæï¼šå¦‚æœå·²ç»å‡‘æ»¡äº†ï¼Œæå‰é€€å‡º
            if dp[target] == target:
                return True
                
        return dp[target] == target
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

*   **æ—¶é—´å¤æ‚åº¦**: $O(n \times m)$
    *   $n$ æ˜¯æ•°ç»„é•¿åº¦ï¼Œ$m$ æ˜¯ `target` (æ€»å’Œçš„ä¸€åŠ)ã€‚è¿™æ˜¯ä¸€ä¸ª**ä¼ªå¤šé¡¹å¼æ—¶é—´**ç®—æ³•ï¼Œæ•ˆç‡å–å†³äºæ•°å€¼å¤§å°ã€‚
*   **ç©ºé—´å¤æ‚åº¦**: $O(m)$
    *   ä½¿ç”¨äº†æ»šåŠ¨æ•°ç»„ä¼˜åŒ–ï¼Œåªç»´æŠ¤ä¸€ä¸ªé•¿åº¦ä¸º `target + 1` çš„ä¸€ç»´æ•°ç»„ã€‚

## ğŸ’£ è¸©å‘/é¢è¯•è€ƒç‚¹
1.  **ä¸ºä»€ä¹ˆå†…å±‚è¦å€’åºï¼Ÿ**
    *   å¦‚æœæ­£åºéå† (`0 -> target`)ï¼Œè®¡ç®— `dp[j]` æ—¶ä¼šç”¨åˆ°**å½“å‰è¿™ä¸€è½®**åˆšåˆšæ›´æ–°è¿‡çš„ `dp[j-num]`ï¼Œå¯¼è‡´ä¸€ä¸ªæ•°å­—è¢«å¤šæ¬¡ç´¯åŠ ï¼ˆå˜æˆäº†å®Œå…¨èƒŒåŒ…ï¼‰ã€‚
    *   å€’åºéå† (`target -> 0`)ï¼Œè®¡ç®— `dp[j]` æ—¶ç”¨åˆ°çš„æ˜¯**ä¸Šä¸€è½®**ï¼ˆè¿˜æ²¡æ”¾å…¥å½“å‰ç‰©å“ï¼‰çš„çŠ¶æ€ï¼Œä¿è¯æ¯ä¸ªç‰©å“ä»…ç”¨ä¸€æ¬¡ã€‚
2.  **ä¸ºä»€ä¹ˆå¤–å±‚æ˜¯ç‰©å“ï¼Œå†…å±‚æ˜¯èƒŒåŒ…ï¼Ÿ**
    *   åœ¨ä¸€ç»´æ•°ç»„ä¼˜åŒ–ä¸‹ï¼Œè¿™ä¸ªé¡ºåºæ˜¯å›ºå®šçš„ã€‚åè¿‡æ¥å†™ï¼ˆå¤–å±‚èƒŒåŒ…ï¼Œå†…å±‚ç‰©å“ï¼‰ä¼šå¯¼è‡´é€»è¾‘æ··ä¹±æˆ–é‡å¤è®¡ç®—ã€‚

---

# åŠ¨æ€è§„åˆ’ï¼šèƒŒåŒ…é—®é¢˜ç†è®ºåŸºç¡€ (Knapsack Problem Essentials)

**æ—¥æœŸ**: 2025-12-30
**æ ‡ç­¾**: #åŠ¨æ€è§„åˆ’ #èƒŒåŒ…é—®é¢˜ #æ–¹æ³•è®º

## ğŸ’ ä¸€ã€ 0-1 èƒŒåŒ… (0-1 Knapsack)

**å®šä¹‰**ï¼šæœ‰ $N$ ä»¶ç‰©å“å’Œå®¹é‡ä¸º $W$ çš„èƒŒåŒ…ã€‚ç¬¬ $i$ ä»¶ç‰©å“çš„é‡é‡æ˜¯ $w[i]$ï¼Œä»·å€¼æ˜¯ $v[i]$ã€‚**æ¯ä»¶ç‰©å“åªèƒ½ä½¿ç”¨ä¸€æ¬¡**ã€‚

### 1. äºŒç»´æ•°ç»„åŸç† (ç†è§£ç”¨)
*   **çŠ¶æ€å®šä¹‰**ï¼š`dp[i][j]` è¡¨ç¤ºä»ä¸‹æ ‡ä¸º `0-i` çš„ç‰©å“é‡Œä»»æ„å–ï¼Œæ”¾è¿›å®¹é‡ä¸º `j` çš„èƒŒåŒ…ï¼Œä»·å€¼æ€»å’Œæœ€å¤§æ˜¯å¤šå°‘ã€‚
*   **é€’æ¨å…¬å¼**ï¼š
    $$ dp[i][j] = \max(dp[i-1][j], \ dp[i-1][j - w[i]] + v[i]) $$
    (ä¸æ”¾ç‰©å“ $i$ vs æ”¾ç‰©å“ $i$)

### 2. ä¸€ç»´æ•°ç»„ä¼˜åŒ– (å®æˆ˜ç”¨)
*   **çŠ¶æ€å®šä¹‰**ï¼š`dp[j]` è¡¨ç¤ºå®¹é‡ä¸º `j` çš„èƒŒåŒ…ï¼Œæ‰€èƒŒçš„ç‰©å“ä»·å€¼æœ€å¤§æ˜¯å¤šå°‘ã€‚
*   **é€’æ¨å…¬å¼**ï¼š
    $$ dp[j] = \max(dp[j], \ dp[j - w[i]] + v[i]) $$

### âš¡ï¸ æ ¸å¿ƒéå†é¡ºåº (å¿…èƒŒ)
1.  **å¤–å±‚**å¾ªç¯éå†**ç‰©å“**ã€‚
2.  **å†…å±‚**å¾ªç¯éå†**èƒŒåŒ…å®¹é‡**ã€‚
3.  **å…³é”®**ï¼šå†…å±‚å¾ªç¯å¿…é¡» **å€’åº (ä»å¤§åˆ°å°)** éå†ï¼
    *   *åŸå› *ï¼šä¸ºäº†ä¿è¯æ¯ä¸ªç‰©å“**åªè¢«æ”¾å…¥ä¸€æ¬¡**ã€‚å¦‚æœæ­£åºéå†ï¼Œè®¡ç®— `dp[j]` æ—¶ä¼šåˆ©ç”¨åˆ°å½“å‰å±‚åˆšåˆšæ›´æ–°è¿‡çš„ `dp[j-w[i]]`ï¼Œå¯¼è‡´ä¸€ä¸ªç‰©å“è¢«æ”¾å…¥å¤šæ¬¡ã€‚

### ğŸ’» 0-1 èƒŒåŒ…æ¨¡æ¿ä»£ç 
```python
# weights: ç‰©å“é‡é‡, values: ç‰©å“ä»·å€¼, bag_size: èƒŒåŒ…å®¹é‡
dp = [0] * (bag_size + 1)

for i in range(len(weights)):              # å…ˆéå†ç‰©å“
    for j in range(bag_size, weights[i] - 1, -1):  # å†éå†èƒŒåŒ… (å€’åº!)
        dp[j] = max(dp[j], dp[j - weights[i]] + values[i])
```

---

## ğŸ’ äºŒã€ å®Œå…¨èƒŒåŒ… (Unbounded Knapsack)

**å®šä¹‰**ï¼šæœ‰ $N$ ä»¶ç‰©å“å’Œå®¹é‡ä¸º $W$ çš„èƒŒåŒ…ã€‚**æ¯ä»¶ç‰©å“å¯ä»¥ä½¿ç”¨æ— é™æ¬¡**ã€‚

### âš¡ï¸ æ ¸å¿ƒåŒºåˆ«
å®Œå…¨èƒŒåŒ…å’Œ 0-1 èƒŒåŒ…çš„å”¯ä¸€åŒºåˆ«åœ¨äº**å†…å±‚å¾ªç¯çš„é¡ºåº**ã€‚
*   **0-1 èƒŒåŒ…**ï¼šå€’åºéå†ã€‚
*   **å®Œå…¨èƒŒåŒ…**ï¼š**æ­£åº (ä»å°åˆ°å¤§)** éå†ã€‚
    *   *åŸå› *ï¼šå› ä¸ºç‰©å“å¯ä»¥æ— é™å–ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è®¡ç®— `dp[j]` æ—¶ï¼Œæ­£éœ€è¦åˆ©ç”¨â€œå½“å‰ç‰©å“å·²ç»è¢«æ”¾å…¥è¿‡â€çš„çŠ¶æ€ï¼ˆ`dp[j-w[i]]`ï¼‰ã€‚

### ğŸ’» å®Œå…¨èƒŒåŒ…æ¨¡æ¿ä»£ç 
```python
# æ ¸å¿ƒåŒºåˆ«ä»…åœ¨ç¬¬äºŒè¡Œ range çš„æ–¹å‘
for i in range(len(weights)):              # å…ˆéå†ç‰©å“
    for j in range(weights[i], bag_size + 1):  # å†éå†èƒŒåŒ… (æ­£åº!)
        dp[j] = max(dp[j], dp[j - weights[i]] + values[i])
```

---

## ğŸ” ä¸‰ã€ è¿›é˜¶ï¼šéå†é¡ºåºçš„æ·±å±‚å«ä¹‰

åœ¨å®Œå…¨èƒŒåŒ…ï¼ˆæ±‚æ–¹æ¡ˆæ•°/ç»„åˆæ•°ï¼‰çš„é—®é¢˜ä¸­ï¼Œä¸¤å±‚å¾ªç¯çš„**åµŒå¥—é¡ºåº**å†³å®šäº†ç»“æœæ˜¯â€œç»„åˆâ€è¿˜æ˜¯â€œæ’åˆ—â€ã€‚

| é¢˜ç›®è¦æ±‚ | éå†é¡ºåº | å…¸å‹é¢˜ç›® |
| :--- | :--- | :--- |
| **0-1 èƒŒåŒ…** (æœ€å¤§ä»·å€¼) | å…ˆç‰©å“ï¼ŒåèƒŒåŒ… (å€’åº) | 416. åˆ†å‰²ç­‰å’Œå­é›† |
| **å®Œå…¨èƒŒåŒ…** (æœ€å¤§ä»·å€¼) | å…ˆç‰©å“ï¼ŒåèƒŒåŒ… (æ­£åº) | 322. é›¶é’±å…‘æ¢ (æ±‚æœ€å°‘ç¡¬å¸) |
| **æ±‚ç»„åˆæ•°** (ä¸åˆ†é¡ºåº) | **å…ˆç‰©å“ï¼ŒåèƒŒåŒ…** | 518. é›¶é’±å…‘æ¢ II (1+2 å’Œ 2+1 ç®—ä¸€ç§) |
| **æ±‚æ’åˆ—æ•°** (åŒºåˆ†é¡ºåº) | **å…ˆèƒŒåŒ…ï¼Œåç‰©å“** | 377. ç»„åˆæ€»å’Œ â…£ (1+2 å’Œ 2+1 ç®—ä¸¤ç§) |

### ğŸ’¡ è®°å¿†å£è¯€
> **â€œç‰©å“åœ¨å†…æ˜¯æ’åˆ—ï¼Œç‰©å“åœ¨å¤–æ˜¯ç»„åˆã€‚â€**

---

## ğŸ“Š å¤æ‚åº¦æ€»ç»“

| ç®—æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ |
| :--- | :--- | :--- |
| **äºŒç»´ 0-1** | $O(N \times W)$ | $O(N \times W)$ |
| **ä¸€ç»´ 0-1** | $O(N \times W)$ | **$O(W)$** |
| **å®Œå…¨èƒŒåŒ…** | $O(N \times W)$ | **$O(W)$** |

*æ³¨ï¼š$N$ ä¸ºç‰©å“æ•°é‡ï¼Œ$W$ ä¸ºèƒŒåŒ…å®¹é‡ã€‚è¯¥ç®—æ³•ä¸º**ä¼ªå¤šé¡¹å¼æ—¶é—´**ã€‚*